; File: platformio.ini
; Configurazione ambienti per il sistema EasyConnect2026

[platformio]
src_dir = src

[env]
; --- IMPOSTAZIONI COMUNI A TUTTE LE SCHEDE ---
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino
monitor_speed = 115200
lib_ldf_mode = deep+
build_flags = 
    -D ARDUINO_USB_MODE=1
    -D ARDUINO_USB_CDC_ON_BOOT=1

; --- 1. SCHEDA MASTER (Standalone / Rewamping) ---
[env:master_rewamping]
build_src_filter = 
    +<*> 
    -<main_pressione.cpp> 
    -<main_relay.cpp> 
    -<main_motore.cpp> 
    -<main_easyconnect.cpp>
    -<RS485_Slave.cpp> 
    -<Serial_Slave.cpp>
lib_deps = 
    SPI
    Wire
    adafruit/Adafruit SHTC3 Library @ ^1.0.1
    bluerobotics/BlueRobotics MS5837 Library @ ^1.1.1

; --- 2. SCHEDA PRESSIONE (Slave esistente) ---
[env:pressione]
build_src_filter = 
    +<*> 
    -<main_master.cpp> 
    -<main_relay.cpp> 
    -<main_motore.cpp> 
    -<main_easyconnect.cpp>
    -<WebHandler.cpp> 
    -<RS485_Master.cpp> 
    -<Serial_Master.cpp> 
    -<Calibration.cpp> 
    -<MembraneKeyboard.cpp>
lib_deps = 
    SPI
    Wire
    adafruit/Adafruit SHTC3 Library @ ^1.0.1
    bluerobotics/BlueRobotics MS5837 Library @ ^1.1.1

; --- 3. SCHEDA RELAY (Da sviluppare) ---
[env:relay]
build_src_filter = 
    +<*>
    -<main_master.cpp>
    -<main_pressione.cpp>
    -<main_motore.cpp>
    -<main_easyconnect.cpp>
    -<WebHandler.cpp>
    -<RS485_Master.cpp>
    -<Serial_Master.cpp>
    -<Calibration.cpp>
    -<MembraneKeyboard.cpp>
    ; Nota: RS485_Slave.cpp Ã¨ specifico per la pressione, ne faremo uno per i relay
    -<RS485_Slave.cpp> 
lib_deps = 
    SPI
    Wire

; --- 4. SCHEDA MOTORE (Da sviluppare su HW Pressione) ---
[env:motore]
build_src_filter = 
    +<*>
    -<main_master.cpp>
    -<main_pressione.cpp>
    -<main_relay.cpp>
    -<main_easyconnect.cpp>
    -<WebHandler.cpp>
    -<RS485_Master.cpp>
    -<Serial_Master.cpp>
    -<Calibration.cpp>
    -<MembraneKeyboard.cpp>
    -<RS485_Slave.cpp>
lib_deps = 
    SPI
    Wire

; --- 5. SCHEDA EASYCONNECT (Master con Display - Da sviluppare) ---
[env:easyconnect]
build_src_filter = 
    +<*>
    -<main_master.cpp>
    -<main_pressione.cpp>
    -<main_relay.cpp>
    -<main_motore.cpp>
    -<RS485_Slave.cpp>
    -<Serial_Slave.cpp>
    ; Qui serviranno librerie per il display
lib_deps = 
    SPI
    Wire
